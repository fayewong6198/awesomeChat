<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Awesome Chat</title>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <!-- Latest compiled and minified CSS -->
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css"
    />
    <link
      rel="shortcut icon"
      href="/images/logo_favicon/favicon-trungquandev.png"
    />
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <!-- <link rel="stylesheet" href="/css/style.css" /> -->
  </head>
  <body>
    <%- include("../sections/navbar"); %>

    <div class="row m-0">
      <!-- Alert -->

      <div class="col-md-3 pl-0">
        <%- include("../sections/left-side"); %>
      </div>
      <div class="col-md-9">
        <% if (message != false) { %>
        <div class="alert alert-success" role="alert">
          <%- message %>
        </div>
        <% } %> <% if (error.length > 0) { %>
        <div class="alert alert-danger" role="alert">
          <%- error %>
        </div>
        <% } %>
        <h1 class="text-primary">List User</h1>
        <% if (auth_permistions['CREATE_USER'] == true || auth_role == 'admin')
        { %>
        <a href="/admin/users/create"
          ><button class="btn btn-info m-3">Create new</button>
        </a>
        <% } %>

        <table class="table table-striped">
          <thead>
            <tr>
              <th scope="col">Username</th>
              <th scope="col">Email</th>
              <th scope="col">Role</th>
              <th scope="col">Gender</th>
            </tr>
          </thead>
          <tbody>
            <% for(let i=0; i < users.length; i++) { %>
            <tr>
              <td>
                <a href="/admin/users/<%- users[i]._id %>"
                  ><%- users[i].username %></a
                >
              </td>
              <td>
                <a href="/admin/users/<%- users[i]._id %>"
                  ><%- users[i].local.email %></a
                >
              </td>
              <td><a href=""> <%- users[i].role %> </a></td>
              <td><a href=""><%- users[i].gender %></a></td>
            </tr>
            <% } %>
          </tbody>
        </table>
      </div>
    </div>

    <!--Libraries-->
    <script src="/bower_components/jquery/dist/jquery.min.js"></script>
    <script src="/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="/https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.1.1/socket.io.js"></script>
    <script src="/bower_components/jquery.nicescroll/jquery.nicescroll.min.js"></script>
    <script src="/bower_components/AlertifyJS/build/alertify.js"></script>
    <script src="/bower_components/moment/min/moment.min.js"></script>
    <script src="/bower_components/moment/min/moment-with-locales.min.js"></script>
    <script src="/bower_components/emojionearea/dist/emojionearea.min.js"></script>
    <script src="/bower_components/peerjs/peer.min.js"></script>
    <script src="/bower_components/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <script src="/bower_components/photoset-grid/jquery.photoset-grid.min.js"></script>
    <script src="/bower_components/jquery-colorbox/jquery.colorbox-min.js"></script>
    <script src="/socket.io/socket.io.js"></script>
    <script src="/emojione/lib/js/emojione.min.js"></script>
  </body>
</html>
